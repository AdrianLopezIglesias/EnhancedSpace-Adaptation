<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/ScienceConstructibleElement.xsd">


    <!-- PathPrerequisite: Starting point is ClassEmpire -->


    <!-- ###################################### -->
    <!-- #######          STAGE 1       ####### -->
    <!-- ###################################### -->
    <TechnologyStageDefinition Name="TechnologyStageDefinitionScienceAndExploration1" TechnologyQuadrant="TechnologyQuadrantScienceAndExploration" StageNumber="1">
        <SimulationDescriptorReference Name="TechnologyStageScienceAndExploration1"/>
    </TechnologyStageDefinition>

    <!-- ???-->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration1" TechnologyStage="TechnologyStageDefinitionScienceAndExploration1" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked" TechnologyFlags="Affinity">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage1Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization1"/>
        <SimulationDescriptorReference Name="TechnologyScience1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage1"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>


        <HelperVariable Name="AvailableTundraPlanets"/>
        <HelperVariable Name="ScienceVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperVariable Name="AvailableTeemingPlanets"/>
        <HelperVariable Name="AvailableTemperatePlanets"/>
        
        <HelperFormula>$(AvailableTundraPlanets) * 1 + $(OwnedPlanetsCount) * 1 + $(AvailableTemperatePlanets) * 1 + $(AvailableTeemingPlanets) * 1</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration1Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration1" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked" TechnologyFlags="Affinity">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage1Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization1Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyScience1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage1"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableTundraPlanets"/>
        <HelperVariable Name="ScienceVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperVariable Name="AvailableTeemingPlanets"/>
        <HelperVariable Name="AvailableTemperatePlanets"/>

        <HelperFormula>$(AvailableTundraPlanets) * 1 + $(OwnedPlanetsCount) * 1 + $(AvailableTemperatePlanets) * 1 + $(AvailableTeemingPlanets) * 1</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration1TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration1" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked" TechnologyFlags="Affinity">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage1Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization1TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyScience1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage1"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="ScienceVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperVariable Name="AvailableTeemingPlanets"/>
        <HelperVariable Name="AvailableTemperatePlanets"/>

        <HelperFormula>$(AvailableSnowPlanets) * 1 + $(OwnedPlanetsCount) * 1 + $(AvailableTemperatePlanets) * 1 + $(AvailableTeemingPlanets) * 1</HelperFormula>
    </TechnologyDefinition>


    <!-- ???-->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration2" TechnologyStage="TechnologyStageDefinitionScienceAndExploration1" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked" TechnologyFlags="Affinity">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage1Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization2"/>
        <SimulationDescriptorReference Name="TechnologyColonization2Common"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo2Vaulters"/>
        <SimulationDescriptorReference Name="TechnologyModuleSupportAnalyzer1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage1"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableTropicalPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableTropicalPlanets) * 1 + $(TurnVariable) * 20</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration2Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration1" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked" TechnologyFlags="Affinity">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage1Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization2Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyModuleSupportAnalyzer1"/>  
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage1"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableTropicalPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableTropicalPlanets) * 1 + $(TurnVariable) * 20</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration2TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration1" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked" TechnologyFlags="Affinity">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage1Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization2TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyModuleSupportAnalyzer1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage1"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableAridPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableAridPlanets) * 1 + $(TurnVariable) * 20</HelperFormula>
    </TechnologyDefinition>


    <!-- ###################################### -->
    <!-- #######          STAGE 2       ####### -->
    <!-- ###################################### -->
    <TechnologyStageDefinition Name="TechnologyStageDefinitionScienceAndExploration2" TechnologyQuadrant="TechnologyQuadrantScienceAndExploration" StageNumber="2">
        <SimulationDescriptorReference Name="TechnologyStageScienceAndExploration2"/>
        <SimulationDescriptorReference Name="TechnologyDefensiveProgram1"/>
        <SimulationDescriptorReference Name="TechnologyOffensiveProgram1"/>
        <SimulationDescriptorReference Name="TechnologyWormhole"/>
        <UnlockCount UnlockCount="1" CountPropertyName="QuadrantScienceAndExplorationStage1UnlockedTechnologyCount"/>
    </TechnologyStageDefinition>
    
    <!-- ???? -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration25" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To25'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization3"/>
        <SimulationDescriptorReference Name="TechnologyColonization3Vaulters"                     />
        <SimulationDescriptorReference Name="TechnologyColonization3VaultersNoPortals"            />
        <SimulationDescriptorReference Name="TechnologyColonization3VaultersNoVaultersPopulation" />
        <SimulationDescriptorReference Name="TechnologyExplorationModule1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSteppesPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableSteppesPlanets) * 1 + $(TurnVariable) * 40</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration25TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To25'))) *  Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization3TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyExplorationModule1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSteppesPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableSteppesPlanets) * 1 + $(TurnVariable) * 40</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration25Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To25'))) *  Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization3Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyExplorationModule1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSteppesPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableSteppesPlanets) * 1 + $(TurnVariable) * 40</HelperFormula>
    </TechnologyDefinition>

    <!-- PEV-SCALE ACCELERATOR -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration4" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration2To4'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization4"/>
        <SimulationDescriptorReference Name="TechnologyColonization4Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <SimulationDescriptorReference Name="TechnologyExplorationModule2"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>
        <HelperVariable Name="AvailableVeldtPlanets"/>
        <HelperVariable Name="ExplorationRatioVariable"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableVeldtPlanets) * 1 + $(TurnVariable) * 10 + $(ExplorationRatioVariable) * 5</HelperFormula>
    </TechnologyDefinition>


    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration4Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration2To4'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization4Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <SimulationDescriptorReference Name="TechnologyExplorationModule2"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>
        <HelperVariable Name="AvailableVeldtPlanets"/>
        <HelperVariable Name="ExplorationRatioVariable"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableVeldtPlanets) * 1 + $(TurnVariable) * 10 + $(ExplorationRatioVariable) * 5</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration4TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration2To4'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization4TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <SimulationDescriptorReference Name="TechnologyExplorationModule2"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>
        <HelperVariable Name="AvailableVeldtPlanets"/>
        <HelperVariable Name="ExplorationRatioVariable"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableVeldtPlanets) * 1 + $(TurnVariable) * 10 + $(ExplorationRatioVariable) * 5</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration4Vaulters" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration2To4'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityVaulters">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
      <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCVaulters</DownloadableContentPrerequisite>
      <SimulationDescriptorReference Name="TechnologyColonization4"/>
      <SimulationDescriptorReference Name="TechnologyExplorationModule2"/>
      <SimulationDescriptorReference Name="TechnologyFreeMovementVaulters"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

      <HelperVariable Name="AvailableVeldtPlanets"/>
      <HelperVariable Name="ExplorationRatioVariable"/>
      <HelperVariable Name="TurnVariable"/>
      <HelperFormula>$(AvailableVeldtPlanets) * 1 + $(TurnVariable) * 10 + $(ExplorationRatioVariable) * 5</HelperFormula>
    </TechnologyDefinition>
  
    <!-- Rare Earth Foams -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration5" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier)* (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration2To5'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen,</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyScience2"/>
        <SimulationDescriptorReference Name="TechnologyColonization7"/>
        <SimulationDescriptorReference Name="TechnologyLinkColonization7Common"/>
        <SimulationDescriptorReference Name="TechnologyExploration1Alt"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>


        <HelperVariable Name="AvailableAridPlanets"/>
        <HelperVariable Name="SciencePopulation"/>
        <HelperFormula>$(AvailableAridPlanets) * 1  + $(SciencePopulation) * 4</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration5Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration2To5'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyScience2"/>
        <SimulationDescriptorReference Name="TechnologyColonization7Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyExploration1Alt"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableAridPlanets"/>
        <HelperVariable Name="SciencePopulation"/>
        <HelperFormula>$(AvailableAridPlanets) * 1  + $(SciencePopulation) * 4</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration5TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration2To5'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyScience2"/>
        <SimulationDescriptorReference Name="TechnologyColonization7TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo5CommonTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo5SophonsTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyExploration1Alt"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableTropicalPlanets"/>
        <HelperVariable Name="SciencePopulation"/>
        <HelperFormula>$(AvailableTropicalPlanets) * 1  + $(SciencePopulation) * 4</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration5Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration2To5'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyScience2"/> 
        <SimulationDescriptorReference Name="TechnologyColonization7"/>
        <SimulationDescriptorReference Name="TechnologyLinkColonization7Vampirilis"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>


        <HelperVariable Name="AvailableTropicalPlanets"/>
        <HelperVariable Name="SciencePopulation"/>
        <HelperFormula>$(AvailableTropicalPlanets) * 1  + $(SciencePopulation) * 2</HelperFormula>
    </TechnologyDefinition>

    <!-- ????? -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="DiplomaticTradable" Inverted="true">ClassEmpire,AffinityGameplayMajorHisshos</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessCommon"/>-->
        <SimulationDescriptorReference Name="TechnologyHonorHisshos"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo28Common"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo28CommonVaulters" />
        <SimulationDescriptorReference Name="TechnologyLinkTo28CommonVaultersNoPortals" />
        <SimulationDescriptorReference Name="TechnologyLinkTo28CommonVaultersNoVaultersPopulation" />
        <SimulationDescriptorReference Name="TechnologyColonization5"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>


        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableSnowPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingTimeLords</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessCommon"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28CommonUnfallen"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>        
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableSnowPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingTimeLords</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessCommon"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28CommonTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableTundraPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableTundraPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28Sophons" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinitySophons" Inverted="false">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyLinkTo28Sophons"/>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessSophons"/>-->
        <SimulationDescriptorReference Name="TechnologyColonization5"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableSnowPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28UnfallenSophons" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinitySophons" Inverted="false">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessSophons"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28SophonsUnfallen"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableSnowPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28TimeLordsSophons" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinitySophons" Inverted="false">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessSophons"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28SophonsTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableTundraPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableTundraPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28Horatio" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityHoratio" Inverted="false">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyLinkTo28Horatio"/>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessHoratio"/>-->
        <SimulationDescriptorReference Name="TechnologyColonization5"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableSnowPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28UnfallenHoratio" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityHoratio" Inverted="false">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessHoratio"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28HoratioUnfallen"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableSnowPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28TimeLordsHoratio" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityHoratio" Inverted="false">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessHoratio"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28HoratioTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableTundraPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableTundraPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28TimeLords2" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityTimeLords" Inverted="false">ClassEmpire,AffinityMappingTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessTimeLords"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableSnowPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>
    
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28UnfallenTimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityTimeLords" Inverted="false">ClassEmpire,AffinityMappingTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessTimeLords"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28TimeLordsUnfallen"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableSnowPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableSnowPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration28TimeLordsTimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To28'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityTimeLords" Inverted="false">ClassEmpire,AffinityMappingTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <!--<SimulationDescriptorReference Name="TechnologyGlobalHappinessTimeLords"/>-->
        <SimulationDescriptorReference Name="TechnologyLinkTo28TimeLordsTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyColonization5Common"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="AvailableTundraPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperVariable Name="HappinessVariable"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperFormula>$(AvailableTundraPlanets) * 1  + $(HappinessVariable) * $(OwnedPlanetsCount) + 10 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>


    <!-- ###################################### -->
    <!-- #######          STAGE 3       ####### -->
    <!-- ###################################### -->
    <TechnologyStageDefinition Name="TechnologyStageDefinitionScienceAndExploration3" TechnologyQuadrant="TechnologyQuadrantScienceAndExploration"  StageNumber="3">
        <SimulationDescriptorReference Name="TechnologyStageScienceAndExploration3"/>
        <SimulationDescriptorReference Name="TechnologyOffensiveProgram2"/>
        <SimulationDescriptorReference Name="TechnologyDefensiveProgram2"/>
        <SimulationDescriptorReference Name="TechnologyFreeMovement"/>
        <SimulationDescriptorReference Name="TechnologyExploration1"/>
        <PopulationEvent Name="PopulationPoliticalEventUnlockStage"/>

        <UnlockCount UnlockCount="2" CountPropertyName="QuadrantScienceAndExplorationStage2UnlockedTechnologyCount">
        </UnlockCount>
    </TechnologyStageDefinition>


  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExplorationJuggernaut1" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostJuggernautMultiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCHisshos</DownloadableContentPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Disable,JuggernautsNotDiscovered">../JuggernautsCanBeResearched</PathPrerequisite>
    <PathPrerequisite Flags="DiplomaticTradable,IgnoreOnCommand">false</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyJuggernautMovement1"/>
    <SimulationDescriptorReference Name="TechnologyJuggernautVision1"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationJuggernautIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="JuggernautCount"/>
    <HelperFormula>$(JuggernautCount) * 2</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExplorationJuggernaut3" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostJuggernautMultiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExplorationJuggernaut3To4')))</CustomCost>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCHisshos</DownloadableContentPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Disable,JuggernautsNotDiscovered">../JuggernautsCanBeResearched</PathPrerequisite>
    <PathPrerequisite Flags="DiplomaticTradable">false</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyJuggernautResearch1"/>
    <SimulationDescriptorReference Name="TechnologyLinkToScienceAndExplorationJuggernaut3"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationJuggernautIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="ScienceVariable"/>
    <HelperVariable Name="JuggernautCount"/>
    <HelperVariable Name="AvailableMixedAnomaly"/>
    <HelperVariable Name="AvailableNegativeAnomaly"/>
    <HelperFormula>$(JuggernautCount) * $(ScienceVariable) / 2 + $(AvailableMixedAnomaly) + $(AvailableNegativeAnomaly)</HelperFormula>
  </TechnologyDefinition>


    <!-- PLANETARY LANDSCAPING -->
    <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment2" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <SimulationDescriptorReference Name="TechnologyUniqueFood1"/>
      <SimulationDescriptorReference Name="TechnologyExploration1Vampirilis"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

      <HelperVariable Name="FoodVariable"/>
      <HelperVariable Name="AvailablePlanets"/>
      <HelperVariable Name="AvailableHotPlanets"/>
      <HelperVariable Name="AvailableColdPlanets"/>
      <HelperFormula>(10 * $(AvailablePlanets) + 5 * $(AvailableHotPlanets) +5 * $(AvailableColdPlanets)) *$(FoodVariable)</HelperFormula>
    </TechnologyDefinition>

    <!-- NON BARYONIC PARTICLES-->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration6" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier)  * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To6'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVaulters</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization9"/>
        <SimulationDescriptorReference Name="TechnologyScience4"/>
        <SimulationDescriptorReference Name="TechnologyColonization9Common"/>
        <SimulationDescriptorReference Name="TechnologyMoonExploration"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableIcePlanets"/>
        <HelperVariable Name="SciencePercent"/>
        <HelperFormula>$(AvailableIcePlanets) * 1  + $(SciencePercent) * 10 </HelperFormula>
    </TechnologyDefinition>

   <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration20Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration13To19'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyArkModule4"/>
      <SimulationDescriptorReference Name="TechnologyScience4"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

      <HelperVariable Name="TurnVariable"/>
      <HelperFormula>70 * $(TurnVariable)</HelperFormula>
   </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration6Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier)  * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To6'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization9Unfallen"/>
       <SimulationDescriptorReference Name="TechnologyScience4"/>
        <SimulationDescriptorReference Name="TechnologyMoonExploration"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableIcePlanets"/>
        <HelperVariable Name="SciencePercent"/>
        <HelperFormula>$(AvailableIcePlanets) * 1  + $(SciencePercent) * 10 </HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration6TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier)  * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To6'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization9TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo6CommonTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo6HoratioTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo6SophonsTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo6TimeLordsTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyFood3"/>
        <!--<SimulationDescriptorReference Name="TechnologyScience4"/>-->
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableBorealPlanets"/>
        <HelperVariable Name="SciencePercent"/>
        <HelperFormula>$(AvailableBorealPlanets) * 1  + $(SciencePercent) * 10 </HelperFormula>
    </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration6Vaulters" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier)  * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To6'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVaulters">ClassEmpire,AffinityGameplayVaulters/ClassPopulationEmpireAffinityVaulters</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayVaulters</PathPrerequisite>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCVaulters</DownloadableContentPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization9"/>
    <SimulationDescriptorReference Name="TechnologyColonization9Vaulters"/>
    <SimulationDescriptorReference Name="TechnologyLinkTo6Vaulters"/>
    <SimulationDescriptorReference Name="TechnologyScience4"/>
    <SimulationDescriptorReference Name="TechnologyMoonExploration"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableIcePlanets"/>
    <HelperVariable Name="SciencePercent"/>
    <HelperFormula>$(AvailableIcePlanets) * 1  + $(SciencePercent) * 10 </HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration6VaultersNoPortals" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier)  * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To6'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityVaulters" Inverted="false">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVaulters</PathPrerequisite>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCVaulters</DownloadableContentPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization9"/>
    <SimulationDescriptorReference Name="TechnologyColonization9VaultersNoPortals"/>
    <SimulationDescriptorReference Name="TechnologyScience4"/>
    <SimulationDescriptorReference Name="TechnologyLinkTo6VaultersNoPortals"/>
    <SimulationDescriptorReference Name="TechnologyMoonExploration"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableIcePlanets"/>
    <HelperVariable Name="SciencePercent"/>
    <HelperFormula>$(AvailableIcePlanets) * 1  + $(SciencePercent) * 10 </HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration6VaultersNoVaultersPopulation" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier)  * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To6'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,AffinityGameplayVaulters" Inverted="false">ClassEmpire,AffinityGameplayVaulters</PathPrerequisite>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCVaulters</DownloadableContentPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization9"/>
    <SimulationDescriptorReference Name="TechnologyScience4"/>
    <SimulationDescriptorReference Name="TechnologyColonization9VaultersNoVaultersPopulation"/>
    <SimulationDescriptorReference Name="TechnologyLinkTo6VaultersNoVaultersPopulation"/>
    <SimulationDescriptorReference Name="TechnologyMoonExploration"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableIcePlanets"/>
    <HelperVariable Name="SciencePercent"/>
    <HelperFormula>$(AvailableIcePlanets) * 1  + $(SciencePercent) * 10 </HelperFormula>
  </TechnologyDefinition>


  <!-- ????? -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration7" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To7')))  * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization6"/>
        <SimulationDescriptorReference Name="TechnologyHackRouteBonus1"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo7Common"/>
        <SimulationDescriptorReference Name="TechnologyFood3"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableArcticPlanets"/>
        <HelperVariable Name="ScienceFlat"/>
        <HelperFormula>$(AvailableArcticPlanets) * 1  + $(ScienceFlat) * 20 </HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration7Sophons" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To7')))  * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinitySophons" Inverted="false">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization6"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo7Sophons"/>
       <SimulationDescriptorReference Name="TechnologyHackRouteBonus1"/>
       <SimulationDescriptorReference Name="TechnologyFood3"/>
        <!--<SimulationDescriptorReference Name="TechnologyScience4Sophons"/>-->
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>


        <HelperVariable Name="AvailableArcticPlanets"/>
        <HelperVariable Name="ScienceFlat"/>
        <HelperFormula>$(AvailableArcticPlanets) * 1  + $(ScienceFlat) * 30 </HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration7Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost)* (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To7')))  * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization6Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo7CommonUnfallen"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo7HoratioUnfallen"/>
       <SimulationDescriptorReference Name="TechnologyFood3"/>
       <SimulationDescriptorReference Name="TechnologyHackRouteBonus1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>


        <HelperVariable Name="AvailableArcticPlanets"/>
        <HelperVariable Name="ScienceFlat"/>
        <HelperFormula>$(AvailableArcticPlanets) * 1  + $(ScienceFlat) * 20 </HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration7UnfallenSophons" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To7')))  * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinitySophons" Inverted="false">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization6Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo7SophonsUnfallen"/>
       <SimulationDescriptorReference Name="TechnologyFood3"/>
       <SimulationDescriptorReference Name="TechnologyHackRouteBonus1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableArcticPlanets"/>
        <HelperVariable Name="ScienceFlat"/>
        <HelperFormula>$(AvailableArcticPlanets) * 1  + $(ScienceFlat) * 30 </HelperFormula>
    </TechnologyDefinition>
    
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration7TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To7')))  * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization6TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo7CommonTimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo7HoratioTimeLords"/>
       <SimulationDescriptorReference Name="TechnologyScience3"/>
       <SimulationDescriptorReference Name="TechnologyHackRouteBonus1"/>
       <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableJunglePlanets"/>
        <HelperVariable Name="ScienceFlat"/>
        <HelperFormula>$(AvailableJunglePlanets) * 1  + $(ScienceFlat) * 20 </HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration7TimeLordsSophons" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration28To7')))  * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinitySophons" Inverted="false">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization6TimeLords"/>
        <SimulationDescriptorReference Name="TechnologyLinkTo7SophonsTimeLords"/>
       <SimulationDescriptorReference Name="TechnologyFood3"/>
       <SimulationDescriptorReference Name="TechnologyHackRouteBonus1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableJunglePlanets"/>
        <HelperVariable Name="ScienceFlat"/>
        <HelperFormula>$(AvailableJunglePlanets) * 1  + $(ScienceFlat) * 30 </HelperFormula>
    </TechnologyDefinition>

    <!-- WAVE FUNCTION CONTROL -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization8"/>
        <SimulationDescriptorReference Name="TechnologyLinkColonization8Common"/>
        <SimulationDescriptorReference Name="TechnologyScience3"/>
      
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableDesertPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableDesertPlanets) *  1.5+ $(TurnVariable) * 20</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier)* (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization8"/>
        <SimulationDescriptorReference Name="TechnologyLinkColonization8Vampirilis"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <SimulationDescriptorReference Name="TechnologyScience3"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>
        <HelperVariable Name="AvailableDesertPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableDesertPlanets) *  1.5+ $(TurnVariable) * 10</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyColonization8Unfallen"/>
        <SimulationDescriptorReference Name="TechnologyScience3"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="AvailableDesertPlanets"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>$(AvailableDesertPlanets) *  1.5+ $(TurnVariable) * 20</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyMoonExploration"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <SimulationDescriptorReference Name="TechnologyScience4"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>
        <HelperVariable Name="AvailableMixedAnomaly"/>
        <HelperVariable Name="FoodPopulation"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>25 * $(TurnVariable) + 10 * $(FoodPopulation) + 10 * $(AvailableMixedAnomaly) </HelperFormula>
    </TechnologyDefinition>
   

    <!-- ###################################### -->
    <!-- #######          STAGE 4       ####### -->
    <!-- ###################################### -->
    <TechnologyStageDefinition Name="TechnologyStageDefinitionScienceAndExploration4" TechnologyQuadrant="TechnologyQuadrantScienceAndExploration" StageNumber="4">
        <SimulationDescriptorReference Name="TechnologyStageScienceAndExploration4"/>
        <SimulationDescriptorReference Name="TechnologyCuriosityLevel2"/>
        <SimulationDescriptorReference Name="TechnologyHackBonus1"/>
        <SimulationDescriptorReference Name="TechnologyOffensiveProgram4"/>
        <SimulationDescriptorReference Name="TechnologyDefensiveProgram3"/>
        <PopulationEvent Name="PopulationPoliticalEventUnlockStage"/>
      
        <UnlockCount UnlockCount="2" CountPropertyName="QuadrantScienceAndExplorationStage3UnlockedTechnologyCount">
        <AdditionalTechnologyUnlockCount Count="1">DLCHisshos</AdditionalTechnologyUnlockCount>
        </UnlockCount>
    </TechnologyStageDefinition>

   <!-- LOW KELVIN SCIENCE -->
   <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration12" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration7To12'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <SimulationDescriptorReference Name="TechnologyImproveGasPlanet"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>
      <HelperVariable Name="TurnVariable"/>
      <HelperFormula>25 * $(TurnVariable)</HelperFormula>
   </TechnologyDefinition>

  <!-- JUGG -->

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExplorationJuggernaut4" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostJuggernautMultiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExplorationJuggernaut3To4'))) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExplorationJuggernaut4To5')))</CustomCost>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCHisshos</DownloadableContentPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Disable,JuggernautsNotDiscovered">../JuggernautsCanBeResearched</PathPrerequisite>
    <PathPrerequisite Flags="DiplomaticTradable,IgnoreOnCommand">false</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyJuggernautResearch2"/>
    <SimulationDescriptorReference Name="TechnologyLinkToScienceAndExplorationJuggernaut4"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationJuggernautIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="ScienceVariable"/>
    <HelperVariable Name="JuggernautCount"/>
    <HelperVariable Name="VisiblePlanets"/>
    <HelperFormula>$(JuggernautCount) * $(ScienceVariable) / 2 + $(VisiblePlanets)</HelperFormula>
  </TechnologyDefinition>

   <!-- Universal AERODYNAMICS -->
   <TechnologyDefinition Name="TechnologyDefinitionMilitary18" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration"  ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,Discard,DiplomaticTradable" Inverted="true">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyMilitaryGameplay"/>
      <SimulationDescriptorReference Name="TechnologyDefenseModule2"/>
      <SimulationDescriptorReference Name="TechnologyModuleSupportFleetEngine1Strategic2"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventMilitaristTechnology"/>

      <HelperVariable Name="TurnVariable"/>
      <HelperVariable Name="EnemyEmpires"/>
      <HelperFormula>$(TurnVariable) * 30 + 30 * $(EnemyEmpires)</HelperFormula>
   </TechnologyDefinition>

   <TechnologyDefinition Name="TechnologyDefinitionMilitary18Vaulters" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration"  ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityVaulters" Inverted="false">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
      <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCVaulters</DownloadableContentPrerequisite>
      <SimulationDescriptorReference Name="TechnologyMilitaryGameplay"/>
      <SimulationDescriptorReference Name="TechnologyDefenseModule2"/>
      <SimulationDescriptorReference Name="TechnologyPortalUpgradeShipRegeneration"/>
      <SimulationDescriptorReference Name="TechnologyModuleSupportFleetEngine1Strategic2"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventMilitaristTechnology"/>

      <HelperVariable Name="TurnVariable"/>
      <HelperVariable Name="EnemyEmpires"/>
      <HelperFormula>$(TurnVariable) * 30 + 30 * $(EnemyEmpires)</HelperFormula>
   </TechnologyDefinition>

  <!-- AUTONOMOUS MATERIALS -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration10" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,GalaxyIsUniqueConstellation</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyAnomalyReduction1"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableMixedAnomaly"/>
    <HelperVariable Name="FoodPopulation"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>25 * $(TurnVariable) + 10 * $(FoodPopulation) + 10 * $(AvailableMixedAnomaly) </HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration10Unique" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,GalaxyIsUniqueConstellation</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyAnomalyReduction1"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableMixedAnomaly"/>
    <HelperVariable Name="FoodPopulation"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>25 * $(TurnVariable) + 10 * $(FoodPopulation) + 10 * $(AvailableMixedAnomaly) </HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration10Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,GalaxyIsUniqueConstellation</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyModuleArkScience"/>
     <SimulationDescriptorReference Name="TechnologyPopulation1Alt"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>50 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration10VampirilisUnique" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,GalaxyIsUniqueConstellation</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyModuleArkScience"/>
     <SimulationDescriptorReference Name="TechnologyPopulation1Alt"/>
     <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>50 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>

  <!-- COMPACT WARP METHOD -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration8" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier)   * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyPopulation1Alt"/>
     <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="PopulationVariable"/>
    <HelperVariable Name="AvailableMeagerPlanets"/>
    <HelperVariable Name="AvailableMoonAnomaly"/>
    <HelperFormula>$(PopulationVariable) * $(AvailableMeagerPlanets) + $(AvailableMoonAnomaly) * 20</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration8Horatio" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier)  * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityHoratio" Inverted="false">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyPopulation1Alt"/>
     <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>


    <HelperVariable Name="PopulationVariable"/>
    <HelperVariable Name="AvailableMeagerPlanets"/>
    <HelperVariable Name="AvailableMoonAnomaly"/>
    <HelperFormula>$(PopulationVariable) * $(AvailableMeagerPlanets) * 1.5+ $(AvailableMoonAnomaly) * 20</HelperFormula>
  </TechnologyDefinition>



    <!-- BOTANICAL SCANNING -->
    <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment3" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyFood1"/>
      <SimulationDescriptorReference Name="TechnologyFood1Common"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>


      <HelperVariable Name="PlanetsWithLuxury"/>
      <HelperVariable Name="FoodPopulation"/>
      <HelperVariable Name="FoodVariable"/>
      <HelperFormula>4 * $(FoodPopulation) +  $(FoodVariable)  * $(PlanetsWithLuxury) *10</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment3Horatio" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityHoratio" Inverted="false">ClassEmpire,AffinityMappingHoratio</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyFood1"/>
      <SimulationDescriptorReference Name="TechnologyFood1Horatio"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

      <HelperVariable Name="PlanetsWithLuxury"/>
      <HelperVariable Name="FoodPopulation"/>
      <HelperVariable Name="FoodVariable"/>
      <HelperFormula>4 * $(FoodPopulation) +  $(FoodVariable)  * $(PlanetsWithLuxury) *10</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment3Sophons" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinitySophons" Inverted="false">ClassEmpire,AffinityMappingSophons</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyFood1"/>
      <SimulationDescriptorReference Name="TechnologyFood1Sophons"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

      <HelperVariable Name="PlanetsWithLuxury"/>
      <HelperVariable Name="FoodPopulation"/>
      <HelperVariable Name="FoodVariable"/>
      <HelperFormula>5 * $(FoodPopulation) +  $(FoodVariable)  * $(PlanetsWithLuxury) *10</HelperFormula>
    </TechnologyDefinition>
    
    <!-- ??? -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration11" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration6To11'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <SimulationDescriptorReference Name="TechnologyUniqueScience1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="ScienceVariable"/>
        <HelperFormula>40 * $(TurnVariable) +  10  * $(ScienceVariable)</HelperFormula>
    </TechnologyDefinition>

  
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration16Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration9To15'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyArkModule3"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>


        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>40 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration17" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration9To15'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyFood6"/>
        <SimulationDescriptorReference Name="TechnologyPopulation1"/>
        <SimulationDescriptorReference Name="TechnologyPopulation1Horatio"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

        <HelperVariable Name="FoodPercent"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperVariable Name="FoodVariable"/>
        <HelperFormula> $(FoodPercent) * 10 + $(FoodVariable) * $(OwnedPlanetsCount) </HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration17Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration9To15'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyFood6"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>
        <HelperVariable Name="FoodPercent"/>
        <HelperVariable Name="OwnedPlanetsCount"/>
        <HelperVariable Name="FoodVariable"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>20 * $(TurnVariable) + $(FoodPercent) * 10 + $(FoodVariable) * $(OwnedPlanetsCount) </HelperFormula>
    </TechnologyDefinition>

    <!-- FACTION SPECIFIC -->
    <TechnologyDefinition Name="TechnologyDefinitionTimeBubble1" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,Discard,DiplomaticTradable,Faction,AffinityGameplayTechnologyTimeLords">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyTimeBubble1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>40 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <!-- WAVE FUNCTION CONTROL -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration31" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyScience6"/>
        <SimulationDescriptorReference Name="TechnologyStellarDiscovery"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="SciencePopulation"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>20 * $(TurnVariable) + $(SciencePopulation) * 10</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration31Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyScience6Vampirilis"/>
        <SimulationDescriptorReference Name="TechnologyStellarDiscovery"/>
        <SimulationDescriptorReference Name="TechnologyScience6"/>
        <SimulationDescriptorReference Name="TechnologyArkModule1"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="SciencePopulation"/>
        <HelperFormula>$(SciencePopulation) * 10</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration31TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyScience6"/>
        <SimulationDescriptorReference Name="TechnologyStellarDiscovery"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="SciencePopulation"/>
        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>20 * $(TurnVariable) + $(SciencePopulation) * 10</HelperFormula>
    </TechnologyDefinition>

    <!-- ###################################### -->
    <!-- #######          STAGE 5       ####### -->
    <!-- ###################################### -->
   
    <TechnologyStageDefinition Name="TechnologyStageDefinitionScienceAndExploration5" TechnologyQuadrant="TechnologyQuadrantScienceAndExploration" StageNumber="5">
        <SimulationDescriptorReference Name="TechnologyStageScienceAndExploration5"/>
        <SimulationDescriptorReference Name="TechnologyCuriosityLevel3"/>
        <SimulationDescriptorReference Name="TechnologyOffensiveProgram3"/>
        <SimulationDescriptorReference Name="TechnologyDefensiveProgram4"/>
        <SimulationDescriptorReference Name="TechnologyHackBonus2"/>
        <PopulationEvent Name="PopulationPoliticalEventUnlockStage"/>
        <UnlockCount UnlockCount="4" CountPropertyName="QuadrantScienceAndExplorationStage4UnlockedTechnologyCount"/>
    </TechnologyStageDefinition>
   
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration30" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
       <SimulationDescriptorReference Name="TechnologyWormhole2"/>
        <SimulationDescriptorReference Name="TechnologyMovementBonus"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>40 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

   <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration29" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyPopulationSlots"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

      <HelperVariable Name="TurnVariable"/>
      <HelperFormula>40 * $(TurnVariable)</HelperFormula>
   </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration34" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <SimulationDescriptorReference Name="TechnologyScienceOnGas"/>
        <SimulationDescriptorReference Name="TechnologyAnomalyReduction3"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>40 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration32" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVaulters,FactionTraitManualHomeSystem</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyScience7"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="SciencePercent"/>
    <HelperFormula>$(SciencePercent) * 10</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration32Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyScience7Vampirilis"/>
    <SimulationDescriptorReference Name="TechnologyMovementVampirilis1"/>
    <SimulationDescriptorReference Name="TechnologyScience7"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
     <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="SciencePercent"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>20 * $(TurnVariable) + $(SciencePercent) * 10</HelperFormula>
  </TechnologyDefinition>

   <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration32Vaulters" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVaulters">ClassEmpire,AffinityGameplayVaulters</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard">ClassEmpire,FactionTraitManualHomeSystem</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyUniqueSuperColonizerMobilePortal"/>
      <SimulationDescriptorReference Name="TechnologyScience7"/>
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
      <SimulationDescriptorReference Name="TechnologyCounter"/>
      <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

      <HelperVariable Name="SciencePercent"/>
      <HelperVariable Name="TurnVariable"/>
      <HelperFormula>20 * $(TurnVariable) + $(SciencePercent) * 10</HelperFormula>
   </TechnologyDefinition>

   <TechnologyDefinition Name="TechnologyDefinitionScienceAndExplorationJuggernaut5" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostJuggernautMultiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExplorationJuggernaut4To5')))</CustomCost>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCHisshos</DownloadableContentPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Disable,JuggernautsNotDiscovered">../JuggernautsCanBeResearched</PathPrerequisite>
    <PathPrerequisite Flags="DiplomaticTradable,IgnoreOnCommand">false</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyJuggernautResearch3"/>
    <SimulationDescriptorReference Name="TechnologyLinkToScienceAndExplorationJuggernaut5"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationJuggernautIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="ScienceVariable"/>
    <HelperVariable Name="JuggernautCount"/>
    <HelperVariable Name="VisibleDestroyedPlanets"/>
    <HelperFormula>$(JuggernautCount) * $(ScienceVariable) / 2 + $(VisibleDestroyedPlanets)</HelperFormula>
  </TechnologyDefinition>


  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration14" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration8To14'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyFreeMovement2"/>
    <SimulationDescriptorReference Name="TechnologyEngine4"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>20 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration14Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration8To14'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityVampirilis" Inverted="false">ClassEmpire,AffinityMappingVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyFreeMovement2"/>
    <SimulationDescriptorReference Name="TechnologyEngine4"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>40 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration14Vaulters" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration8To14'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityVaulters" Inverted="false">ClassEmpire,AffinityMappingVaulters</PathPrerequisite>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCVaulters</DownloadableContentPrerequisite>
    <SimulationDescriptorReference Name="TechnologyFreeMovement2"/>
    <SimulationDescriptorReference Name="TechnologyEngine4Vaulters"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>40 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>


  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration13" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyPopulation2"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="PopulationVariable"/>
    <HelperFormula>25 * $(PopulationVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration13Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyArkModule6"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>40 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionUnique11Vaulters" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVaulters">ClassEmpire,AffinityGameplayVaulters</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard">ClassEmpire,FactionTraitManualHomeSystem</PathPrerequisite>
    <DownloadableContentPrerequisite Flags="Prerequisite,Discard">DLCVaulters</DownloadableContentPrerequisite>
    <SimulationDescriptorReference Name="TechnologyUnique11Vaulters"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="ExplorationRatioVariable"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>$(TurnVariable) * 10 + $(ExplorationRatioVariable) * 2.5</HelperFormula>
  </TechnologyDefinition>
  
  <!-- BIOFUEL / CHLOROPHYLE CHEM -->

  <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment16" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingVenetians</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUmbralChoir</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyPlanetFood3"  />
    <SimulationDescriptorReference Name="TechnologyFoodToIndustryCommon"  />
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"   />
    <SimulationDescriptorReference Name="TechnologyCounter" />
    <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

    <HelperVariable Name="IndustryVariable"/>
    <HelperVariable Name="PopulationVariable"/>
    <HelperVariable Name="FoodVariable"/>
    <HelperVariable Name="AvailablePlanets"/>
    <HelperFormula>20 * $(AvailablePlanets) * $(FoodVariable) + 20 * $(IndustryVariable) * $(PopulationVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment16Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingVenetians</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyFoodToIndustryCommon"  />
    <SimulationDescriptorReference Name="TechnologyPlanetFood3"  />
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"   />
    <SimulationDescriptorReference Name="TechnologyCounter" />
    <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

    <HelperVariable Name="IndustryVariable"/>
    <HelperVariable Name="PopulationVariable"/>
    <HelperVariable Name="AvailablePlanets"/>
    <HelperFormula>20 * $(IndustryVariable) * $(PopulationVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment16Venetians" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityVenetians">ClassEmpire,AffinityMappingVenetians</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyPlanetFood3"  />
    <SimulationDescriptorReference Name="TechnologyFoodToIndustryVenetians"  />
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"   />
    <SimulationDescriptorReference Name="TechnologyCounter" />
    <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

    <HelperVariable Name="FoodVariable"/>
    <HelperVariable Name="DustVariable"/>
    <HelperVariable Name="IndustryVariable"/>
    <HelperVariable Name="PopulationVariable"/>
    <HelperVariable Name="AvailablePlanets"/>
    <HelperFormula>20 * $(AvailablePlanets) * $(FoodVariable) + 20 * $(IndustryVariable) * $(PopulationVariable) + 5 * $(DustVariable) * $(PopulationVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment16VampirilisVenetians" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityVenetians">ClassEmpire,AffinityMappingVenetians</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyFoodToIndustryVenetians"  />
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"   />
    <SimulationDescriptorReference Name="TechnologyCounter" />
    <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

    <HelperVariable Name="DustVariable"/>
    <HelperVariable Name="IndustryVariable"/>
    <HelperVariable Name="PopulationVariable"/>
    <HelperFormula> 5 * $(DustVariable) * $(PopulationVariable) + 20 * $(IndustryVariable) * $(PopulationVariable)</HelperFormula>
  </TechnologyDefinition>

   <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment16UmbralChoir" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityUmbralChoir">ClassEmpire,AffinityGameplayUmbralChoir</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyPlanetFood3"  />
      <SimulationDescriptorReference Name="TechnologyFoodToIndustryUmbralChoir"  />
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"   />
      <SimulationDescriptorReference Name="TechnologyCounter" />
      <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

      <HelperVariable Name="IndustryVariable"/>
      <HelperVariable Name="PopulationVariable"/>
      <HelperVariable Name="FoodVariable"/>
      <HelperVariable Name="AvailablePlanets"/>
      <HelperFormula>20 * $(AvailablePlanets) * $(FoodVariable) + 20 * $(IndustryVariable) * $(PopulationVariable)</HelperFormula>
   </TechnologyDefinition>
   
     <!-- CHAOTIC METEOROLOGY -->

    <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment15" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingUnfallen</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyFood4"  />
      <SimulationDescriptorReference Name="TechnologyFood4Common"  />
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"   />
      <SimulationDescriptorReference Name="TechnologyCounter" />
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

      <HelperVariable Name="FoodVariable"/>
      <HelperVariable Name="AvailableGasPlanets"/>
      <HelperVariable Name="AvailablePlanets"/>
      <HelperFormula>20 * $(AvailableGasPlanets) * $(FoodVariable) + 20 * $(AvailablePlanets) * $(FoodVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionEmpireDevelopment15Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
      <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
      <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityUnfallen">ClassEmpire,AffinityMappingUnfallen</PathPrerequisite>
      <SimulationDescriptorReference Name="TechnologyFood4"  />
      <SimulationDescriptorReference Name="TechnologyFood4Unfallen"  />
      <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"   />
      <SimulationDescriptorReference Name="TechnologyCounter" />
      <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

      <HelperVariable Name="FoodVariable"/>
      <HelperVariable Name="AvailableGasPlanets"/>
      <HelperVariable Name="AvailablePlanets"/>
      <HelperFormula>20 * $(AvailableGasPlanets) * $(FoodVariable) + 20 * $(AvailablePlanets) * $(FoodVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration19Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration13To19'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyArkModule5"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>70 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration21" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyAnomalyReduction2"/>
        <SimulationDescriptorReference Name="TechnologyTerraformation2"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>40 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration21Vampirilis" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyVampirilis" Inverted="false">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyArkModule7"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>70 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>



    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration23" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration11To23'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <SimulationDescriptorReference Name="TechnologyScience5"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>
        
        <HelperVariable Name="EnemyEmpires"/>
        <HelperVariable Name="ScienceVariable"/>
        <HelperVariable Name="SciencePercent"/>
        <HelperFormula> $(ScienceVariable) * $(EnemyEmpires) * 5 +  $(SciencePercent) </HelperFormula>
    </TechnologyDefinition>

    <!-- FACTION SPECIFIC -->
    <TechnologyDefinition Name="TechnologyDefinitionTimeBubble2" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,Discard,DiplomaticTradable,Faction,AffinityGameplayTechnologyTimeLords">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyTimeBubble2"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>50 * $(TurnVariable)</HelperFormula>
    </TechnologyDefinition>

    <!--To display once Ch 4.1 UE-Mezari quest has been completed-->
    <TechnologyDefinition Name="TechnologyDefinitionQuestUnitedEmpire12" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyMilitary"  ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="false">ClassEmpire,UEQuestChapter4.1MezariCompleted</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyQuestUnitedEmpire12"/>
        <SimulationDescriptorReference Name="TechnologyCountMilitaryIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
    </TechnologyDefinition>


    <!-- ###################################### -->
    <!-- #######          STAGE 6       ####### -->
    <!-- ###################################### -->

    <TechnologyStageDefinition Name="TechnologyStageDefinitionScienceAndExploration6" TechnologyQuadrant="TechnologyQuadrantScienceAndExploration" StageNumber="6" HideNotification="true">
        <SimulationDescriptorReference Name="TechnologyStageScienceAndExploration6"/>
        <UnlockCount UnlockCount="5" CountPropertyName="QuadrantScienceAndExplorationStage5UnlockedTechnologyCount"/>
        <UnlockCount UnlockCount="5" CountPropertyName="QuadrantEconomyAndTradeStage5UnlockedTechnologyCount"/>
    </TechnologyStageDefinition>

    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExplorationVictory" TechnologyStage="TechnologyStageDefinitionScienceAndExploration6" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <Tags>NoOmniscience,NoBuyout</Tags>
        <CustomCost ResourceName="EmpireResearch">3 * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage6Multiplier) * (1 - (1 - Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)) / 2)</CustomCost>
        <PathPrerequisite Flags="DiplomaticTradable" Inverted="true">EmpireImprovementTechnologyVictoryScience</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyVictoryScience"/>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage6"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula>60 * $(TurnVariable) + 10</HelperFormula>
    </TechnologyDefinition>

    
    <!-- DEPRECATED -->
    <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration22" TechnologyStage="TechnologyStageDefinitionScienceAndExploration5" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
        <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage5Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration14To22'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
        <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard">false</PathPrerequisite>
        <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage5"/>
        <SimulationDescriptorReference Name="TechnologyCounter"/>
        <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

        <HelperVariable Name="TurnVariable"/>
        <HelperFormula></HelperFormula>
    </TechnologyDefinition>
    
    

    
</Datatable>